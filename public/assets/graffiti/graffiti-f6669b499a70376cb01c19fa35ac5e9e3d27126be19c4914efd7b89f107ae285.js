angular.module("graffitiApp").factory("graffiti",["$http",function(t){var n={graffiti:[],heatmap:[]};return n.getAll=function(){return t.get("/get_graffiti.json").success(function(t){angular.copy(t.graffiti,n.graffiti),angular.copy(t.heatmap,n.heatmap)})},n.get=function(n){return t.get("/graffiti/"+n+".json").then(function(t){return t.data})},n.upvote=function(n){if(null==n.upvoted)return t.put("/graffiti/"+n.id+"/upvote.json").success(function(){n.upvotes+=1,n.upvoted=!0})},n.addComment=function(n,i){return t.graffito("/graffiti/"+n+"/comments.json",i)},n.upvoteComment=function(n,i){return t.put("/graffiti/"+n.id+"/comments/"+i.id+"/upvote.json").success(function(){i.upvotes+=1})},n}]);